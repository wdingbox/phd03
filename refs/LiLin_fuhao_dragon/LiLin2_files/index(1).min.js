!function(e,r){"object"===typeof exports&&"object"===typeof module?module.exports=r():"function"===typeof define&&define.amd?define([],r):"object"===typeof exports?exports["error-report"]=r():e.errorReport=r()}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r){return Object.prototype.toString.call(e)==="[object "+r+"]"}function i(){try{return document.createEvent("TouchEvent"),"Mobile"}catch(e){return"PC"}}function a(){var e,r="-",t=navigator;if(t.plugins&&t.plugins.length){for(e=0;e<t.plugins.length;e++)if(-1!==t.plugins[e].name.indexOf("Shockwave Flash")){r=t.plugins[e].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(e=10;e>=2;e--)try{if(new Function("return new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+e+"');")()){r=e+".0";break}}catch(n){}return r}function c(){var e=window.navigator.userAgent;return e.toLowerCase().match(/android/i)?"android":e.toLowerCase().match(/iphone/i)?"iphone":"other"}function u(e){var r,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(r=document.cookie.match(t))?unescape(r[2]):null}t.r(r);var s=function(){},l=function(){function e(r){var t=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.breadcrumbs=[],this.inited=!1,this.errorReporter=void 0,this.domClickEventHandler=function(e){var r=e.target?e.target:e.srcElement,n={tagName:"",id:"",className:"",parentId:"",outerHTML:"",name:"",time:(new Date).getTime()};if(r&&function(e){return e instanceof HTMLElement}(r)&&(r.tagName&&(n.tagName=r.tagName),r.id&&(n.id=r.id),r.className&&(n.className=r.className),r.name&&(n.name=r.name),!r.id)){for(var o=0,i=r;o++<3&&i.parentNode&&i.parentNode&&i.parentNode.outerHTML&&!(i=i.parentNode).id;);if(i.id)n.parentId=o+":"+i.id;else{var a=i.outerHTML.replace(/>\s+</g,"><");a&&a.length>200&&(a=a.slice(0,200)),n.outerHTML=a}}t.breadcrumbs.push(n),t.breadcrumbs.length>10&&t.breadcrumbs.shift()},this.errorReporter=r}var r,t,l;return r=e,(t=[{key:"startCollect",value:function(){this.inited||(this.init(),this.inited=!0)}},{key:"stopCollect",value:function(){this.inited&&(this.destruct(),this.clean(),this.inited=!1)}},{key:"destruct",value:function(){window.onerror=s,window.onunhandledrejection=s,this.unbindCatchClickQueueEvent()}},{key:"clean",value:function(){this.breadcrumbs=[]}},{key:"init",value:function(){this.bindUnhanldePromiseRejectionHandler(),this.bindErrorEventHandler(),this.bindCatchClickQueueEvent()}},{key:"reportCustomError",value:function(e,r){var t;t=e instanceof Error?this.handleErrorStack(e):"string"===typeof e?e:e.toString();var n=this._constructReportBaseError(t);this.reportError(n,r)}},{key:"_constructReportBaseError",value:function(e){return{breadcrumbs:JSON.stringify(this.breadcrumbs),msg:e,rowNum:void 0,colNum:void 0,targetUrl:void 0}}},{key:"reportError",value:function(e,r){var t=function(){var e=window.navigator;return{b:"sinawap",c:"h5",d:u("SINAGLOBALS"),e:c(),f:u("ustat"),g:e.userAgent,h:Date.parse((new Date).toString())/1e3,i:"load",l:window.location.href,_:Math.random()}}(),n=function(){var e=window.screen;return{userAgent:window.navigator.userAgent,currentUrl:window.location.href,timestamp:+new Date+Math.random(),platform:i(),flashVer:a(),title:document.title,screenSize:e.width+"x"+e.height,referer:document.referrer?document.referrer:"",host:window.location.protocol+"//"+window.location.hostname}}();this.errorReporter(e,t,n,r)}},{key:"bindErrorEventHandler",value:function(){var e=this;window.addEventListener("error",(function(r){var t=r.message,n=r.filename,i=r.lineno,a=r.colno,c=r.error;try{a=a||window.event&&window.event.errorCharacter||0;var u=t;o(u=c&&c.stack?e.handleErrorStack(c):e._fixMsgByCaller(u,arguments.callee.caller),"Event")&&(u+=u.type?"--"+u.type+"--"+(u.target?u.target.tagName+"::"+u.target.src:""):""),u&&e.reportError({msg:u,rowNum:i,colNum:a,targetUrl:n,breadcrumbs:JSON.stringify(e.breadcrumbs)})}catch(r){e.reportCustomError(r)}}))}},{key:"_fixMsgByCaller",value:function(e,r){for(var t=[],n=r,o=3;n&&o-- >0&&(t.push(n.toString()),n!==n.caller);)n=n.caller;return t.length>0&&(e+="@"+t.join(",")),e}},{key:"bindUnhanldePromiseRejectionHandler",value:function(){var e=this;window.addEventListener("unhandledrejection",(function(r){try{var t,n=r.reason&&r.reason.message||r.reason;r.reason&&r.reason.stack?(n=e.handleErrorStack(r.reason),t=e._parseErrorStack(r.reason.stack)):n=e._fixMsgByCaller(n,arguments.callee.caller),r.reason instanceof Error&&r.reason,n&&e.reportError({msg:n,rowNum:t&&t.line||0,colNum:t&&t.col||0,targetUrl:t&&t.targetUrl||"",breadcrumbs:JSON.stringify(e.breadcrumbs)})}catch(o){e.reportCustomError(o)}}))}},{key:"_parseErrorStack",value:function(e){var r={col:0,line:0,targetUrl:""};try{var t=e.split("at")[1].match(/http.*/)[0].replace(/\)$/,"").split(":"),n=t.length;r.col=t[n-1],r.line=t[n-2],t.splice(n-2,2),r.targetUrl=t.join(":")}catch(o){}return r}},{key:"handleErrorStack",value:function(e){var r=e.stack,t=e.toString();return t&&r?-1===r.indexOf(t)&&(r+="@"+t):r="",r}},{key:"bindCatchClickQueueEvent",value:function(){window.addEventListener?"ontouchstart"in document.documentElement?window.addEventListener("touchstart",this.domClickEventHandler,!0):window.addEventListener("click",this.domClickEventHandler,!0):document.attachEvent("onclick",this.domClickEventHandler)}},{key:"unbindCatchClickQueueEvent",value:function(){window.addEventListener?"ontouchstart"in document.documentElement?window.removeEventListener("touchstart",this.domClickEventHandler,!0):window.removeEventListener("click",this.domClickEventHandler,!0):document.detachEvent("onclick",this.domClickEventHandler)}}])&&n(r.prototype,t),l&&n(r,l),e}(),d="default",f={breadcrumbs:"bf",colNum:"bg",flashVer:"bi",host:"bj",msg:"n",platform:"bm",referer:"bn",rowNum:"m",screenSize:"bp",targetUrl:"k",title:"br"};function v(e){e&&"object"===typeof e&&e.code&&(d=e.code),(window._ERR_REP&&window._ERR_REP instanceof l?window._ERR_REP:window._ERR_REP=new l((function(r,t,n,o){var i=h(r,n);if(i.customError=t,e.ignoreList&&e.ignoreList.length)for(var a=0;a<e.ignoreList.length;a++){var c=e.ignoreList[a];if(null!==i.msg.match(c))return}!function(e,r){!function(e){var r=new Image,t="https://log.sina.cn/sle.gif?a=error"+function e(r,t,n){if(null==r)return"";var o="",i=typeof r;if("string"==i||"number"==i||"boolean"==i)o+="&"+t+"="+(null==n||n?encodeURIComponent(r):r);else for(var a in r){var c=null==t?a:t+(r instanceof Array?"["+a+"]":"."+a);o+=e(r[a],c,n)}return o}(e);r.src=t}((t=function(e){return e.j=d,e}(function(e){var r=function(e){return Object.keys(f).reduce((function(r,t){return r[f[t]]=e[t]||void 0,r}),{})}(e),t=e.customError;return t?h(t,r):r}(e)),h(t,r)));var t}(i,o)}))).startCollect()}function h(e,r){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t}window.startReport=function(e,r){try{v({code:e,ignoreList:r})}catch(t){window._ERR_REP&&"object"===typeof window._ERR_REP&&window._ERR_REP.reportCustomError&&"function"===typeof window._ERR_REP.reportCustomError&&window._ERR_REP.reportCustomError(t)}window.startReport=void 0}}])}));